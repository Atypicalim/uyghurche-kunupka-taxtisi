<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript" src="./uyghurche/uyghurche.js"></script>
    <script type="text/javascript" src="./pure-js-tools/src/template.js"></script>
    <script type="text/javascript" src="./pure-js-tools/src/query.js"></script>
</head>

<style>
    /*  */
    .flex-center {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .unselectable {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }

    /*  */
    * {
        padding: 0px;
        margin: 0px;
        box-sizing: border-box;
    }

    html,
    body {
        height: 100%;
        width: 100%;
        background: rgb(0, 0, 0);
        color: white;
    }

    /*  */
    #rootNode {
        height: 100%;
        width: 100%;
    }

    #rootBox {
        display: flex;
        flex-direction: column;
        min-width: 1000px;
        height: 750px;
        background: rgb(31, 31, 31);
    }

    #topBox {
        width: 100%;
        height: 10%;
        background: rgba(0, 0, 0, 0.562);
    }

    #middleBox {
        display: flex;
        flex-direction: row;
        width: 100%;
        height: 40%;
        /* background: rgb(133, 132, 132); */
        background: rgb(15, 15, 15);
    }

    #bottomBox {
        width: 100%;
        height: 50%;
        /* background: rgb(15, 15, 15); */
        background: rgb(54, 54, 54);
    }

    #leftBox {
        width: 50%;
        height: 100%;
        background: rgb(54, 54, 54);
    }

    #blackboard {
        width: 90%;
        height: 90%;
        background: rgb(32, 32, 32);
        border: 2px solid black;
        box-shadow: 5px 5px 5px #161616;
        filter: drop-shadow(1px 1px 5px rgba(85, 84, 84, 0.4));
    }

    .triangle {
        position: absolute;
        bottom: 0;
        right: 0;
        background: linear-gradient(-45deg, transparent 50%, rgb(19, 19, 19) 30%, rgb(112, 112, 112) 90%);
        width: 50px;
        height: 50px;
        box-shadow: -3px -3px 5px #0c0c0c;
    }

    #centerBox {
        width: 15%;
        height: 100%;
        background: rgb(54, 54, 54);
    }

    #computer {
        width: 100%;
        height: 88%;
        background: rgb(10, 10, 10);
        border-radius: 5px;
        justify-content: flex-start;
        padding-top: 5%;
    }

    #computer0 {
        width: 90%;
        height: 2%;
        background: rgb(10, 10, 10);
        /* border-radius: 0px 0px 5px 5px; */
    }

    #computer1 {
        width: 80%;
        height: 2%;
        background: rgb(36, 35, 35);
        border-radius: 5px;
        margin-top: 5%;
    }

    #computer2 {
        width: 80%;
        height: 2%;
        background: rgb(36, 35, 35);
        border-radius: 5px;
        margin-top: 5%;
    }

    #computer3 {
        width: 80%;
        height: 2%;
        background: rgb(36, 35, 35);
        border-radius: 5px;
        margin-top: 5%;
    }

    #computer4 {
        width: 80%;
        height: 7%;
        background: rgb(36, 35, 35);
        border-radius: 5px;
        margin-top: 5%;
    }

    #computer5 {
        width: 20px;
        height: 20px;
        background: rgb(36, 35, 35);
        border-radius: 50%;
        margin-top: 5%;
    }

    #rightBox {
        width: 45%;
        height: 100%;
        background: rgb(54, 54, 54);
    }

    #screen1 {
        width: 90%;
        height: 75%;
        background: rgb(10, 10, 10);
        border-radius: 5px;
    }

    #screen2 {
        width: 10%;
        height: 10%;
        background: rgb(10, 10, 10);
    }

    #screen3 {
        width: 75%;
        height: 5%;
        background: rgb(10, 10, 10);
        border-radius: 5px;
    }

    #textBox {
        width: 95%;
        height: 85%;
        background: rgb(32, 32, 32);
        color: rgb(201, 201, 201);
        font-size: 24px;
        border: 2px solid rgb(0, 0, 0);
        border-radius: 5px;
        padding: 10px;
        resize: none;
    }

    textarea::-webkit-scrollbar {
        width: 0;
    }

    #textBox:focus {
        border: 2px solid rgb(39, 39, 39);
        outline: none;
    }

    #keyboard {
        width: 95%;
        height: 90%;
        border: 5px solid black;
        background: rgb(10, 10, 10);
        border-radius: 10px;
        box-shadow: 5px 5px 5px #070707;
        padding: 5px;
    }

    .keyrow {
        background: transparent;
        border-radius: 5px;
        width: 100%;
        height: 20%;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
    }

    .keyitem {
        background: rgb(22, 22, 22);
        border-radius: 5px;
        border: 2px solid rgb(126, 125, 125);
        height: 85%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 10px;
        margin: 5px;
        box-shadow: 5px 5px 5px #181818bd;
    }

    .key_item_top {}

    .key_item_bottom {}

    .key_item_body {}
</style>

<body>
    <div id="rootNode" class="flex-center">
        <div id="rootBox">
            <div id="topBox"></div>
            <div id="middleBox">
                <div id="leftBox" class="flex-center">
                    <div id="blackboard">
                        <div class="triangle"></div>
                    </div>
                </div>
                <div id="centerBox" class="flex-center">
                    <div id="computer" class="flex-center">
                        <div id="computer1"></div>
                        <div id="computer2"></div>
                        <div id="computer3"></div>
                        <div id="computer4"></div>
                        <div id="computer5"></div>
                    </div>
                    <div id="computer0"></div>
                </div>
                <div id="rightBox" class="flex-center">
                    <div id="screen1" class="flex-center">
                        <textarea id="textBox" class="ug" autofocus="true"></textarea>
                    </div>
                    <div id="screen2"></div>
                    <div id="screen3"></div>
                </div>
            </div>
            <div id="bottomBox" class="flex-center unselectable">
                <div id="keyboard" class="flex-center"></div>
            </div>
        </div>
    </div>
</body>

<script id="myKey" type="text/html">
    <% if (this.more != undefined) { %>
        <div class="key_item_top"><% this.more %></div>
        <div class="key_item_bottom"><% this.text %></div>
    <% } else { %>
        <div class="key_item_body"><% this.text %></div>
    <% } %>
</script>

<script id="myBoard" type="text/html">
    <% for (i in this) { %>
    <div class="keyrow">
        <% for (j in this[i]) { %>
        <div class="keyitem" style='flex-grow: <% this[i][j].size %>;'>
            <% rendererKey(this[i][j]) %>
        </div>
        <% } %>
    </div>
    <% } %>
</script>

<script>

    var KEYS = {
        SWUNG: {
            en: "`",
            en_more: '~',
            size: 1,
        },
        ONE: {
            en: "1",
            en_more: '!',
            size: 1,
        },
        TWO: {
            en: "2",
            en_more: '@',
            size: 1,
        },
        THREE: {
            en: "3",
            en_more: '#',
            size: 1,
        },
        FOUR: {
            en: "4",
            en_more: '$',
            size: 1,
        },
        FIVE: {
            en: "5",
            en_more: '%',
            size: 1,
        },
        SIX: {
            en: "6",
            en_more: '^',
            size: 1,
        },
        SEVEN: {
            en: "7",
            en_more: '&',
            size: 1,
        },
        EIGHT: {
            en: "8",
            en_more: '*',
            size: 1,
        },
        NINE: {
            en: "9",
            en_more: '(',
            size: 1,
        },
        ZERO: {
            en: "0",
            en_more: ')',
            size: 1,
        },
        MINUS: {
            en: "-",
            en_more: '_',
            size: 1,
        },
        EQUAL: {
            en: "=",
            en_more: '+',
            size: 1,
        },
        BACKSPACE: {
            en: "Backspace",
            size: 2,
        },
        TAB: {
            en: "Tab",
            size: 1.5,
        },
        Q: {
            en: "Q",
            ug: "چ",
            size: 1,
        },
        W: {
            en: "W",
            ug: "ۋ",
            size: 1,
        },
        E: {
            en: "E",
            ug: "ې",
            size: 1,
        },
        R: {
            en: "R",
            ug: "ر",
            size: 1,
        },
        T: {
            en: "T",
            ug: "ت",
            size: 1,
        },
        Y: {
            en: "Y",
            ug: "ي",
            size: 1,
        },
        U: {
            en: "U",
            ug: "ۇ",
            size: 1,
        },
        I: {
            en: "I",
            ug: "ڭ",
            size: 1,
        },
        O: {
            en: "O",
            ug: "و",
            size: 1,
        },
        P: {
            en: "P",
            ug: "پ",
            size: 1,
        },
        OPEN: {
            en: "[",
            en_more: '{',
            size: 1,
        },
        CLOSE: {
            en: "]",
            en_more: '}',
            size: 1,
        },
        BACKSLASH: {
            en: "\\",
            en_more: '|',
            size: 1.35,
        },
        CAPSLOCK: {
            en: "CapsLock",
            size: 2,
        },
        A: {
            en: "A",
            ug: "ھ",
            size: 1,
        },
        S: {
            en: "S",
            ug: "س",
            size: 1,
        },
        D: {
            en: "D",
            ug: "د",
            ug_more: "ژ",
            size: 1,
        },
        F: {
            en: "F",
            ug: "ا",
            ug_more: "ف",
            size: 1,
        },
        G: {
            en: "G",
            ug: "ە",
            ug_more: "گ",
            size: 1,
        },
        H: {
            en: "H",
            ug: "ى",
            ug_more: "خ",
            size: 1,
        },
        J: {
            en: "J",
            ug: "ق",
            ug_more: "ج",
            size: 1,
        },
        K: {
            en: "K",
            ug: "ك",
            ug_more: "ۆ",
            size: 1,
        },
        L: {
            en: "L",
            ug: "ل",
            size: 1,
        },
        COLON: {
            en: ";",
            en_more: ':',
            size: 1,
        },
        QUETATION: {
            en: "'",
            en_more: '"',
            size: 1,
        },
        ENTER: {
            en: "Enter",
            size: 2.5,
        },
        SHIFT_LEFT: {
            en: "Shift",
            size: 2.5,
        },
        Z: {
            en: "Z",
            ug: "ز",
            size: 1,
        },
        X: {
            en: "X",
            ug: "ش",
            size: 1,
        },
        C: {
            en: "C",
            ug: "غ",
            size: 1,
        },
        V: {
            en: "V",
            ug: "ۈ",
            size: 1,
        },
        B: {
            en: "B",
            ug: "ب",
            size: 1,
        },
        N: {
            en: "N",
            ug: "ن",
            size: 1,
        },
        M: {
            en: "M",
            ug: "م",
            size: 1,
        },
        LESS: {
            en: ",",
            en_more: '<',
            size: 1,
        },
        MORE: {
            en: ".",
            en_more: '>',
            size: 1,
        },
        ASK: {
            en: "/",
            en_more: '?',
            ug: "ئ",
            size: 1,
        },
        SHIFT_RIGHT: {
            en: "Shift",
            size: 2.75,
        },
        CTRL_LEFT: {
            en: "Ctrl",
            size: 1.25,
        },
        FN_LEFT: {
            en: "Fn",
            size: 1,
        },
        WIN: {
            en: "Win",
            size: 1,
        },
        ALT_LEFT: {
            en: "Alt",
            size: 1,
        },
        SPACE: {
            en: "Space",
            size: 8,
        },
        ALT_RIGHT: {
            en: "Alt",
            size: 1,
        },
        FN_RIGHT: {
            en: "Fn",
            size: 1,
        },
        DOC: {
            en: "Doc",
            size: 1,
        },
        CTRL_RIGHT: {
            en: "Ctrl",
            size: 2,
        },
    }

    for (const key in KEYS) {
        KEYS[key].name = key
    }

    var keyConfigs = [
        [KEYS.SWUNG, KEYS.ONE, KEYS.TWO, KEYS.THREE, KEYS.FOUR, KEYS.FIVE, KEYS.SIX, KEYS.SEVEN, KEYS.EIGHT, KEYS.NINE, KEYS.ZERO, KEYS.MINUS, KEYS.EQUAL, KEYS.BACKSPACE],
        [KEYS.TAB, KEYS.Q, KEYS.W, KEYS.E, KEYS.R, KEYS.T, KEYS.Y, KEYS.U, KEYS.I, KEYS.O, KEYS.P, KEYS.OPEN, KEYS.CLOSE, KEYS.BACKSLASH],
        [KEYS.CAPSLOCK, KEYS.A, KEYS.S, KEYS.D, KEYS.F, KEYS.G, KEYS.H, KEYS.J, KEYS.K, KEYS.L, KEYS.COLON, KEYS.QUETATION, KEYS.ENTER],
        [KEYS.SHIFT_LEFT, KEYS.Z, KEYS.X, KEYS.C, KEYS.V, KEYS.B, KEYS.N, KEYS.M, KEYS.LESS, KEYS.MORE, KEYS.ASK, KEYS.SHIFT_RIGHT],
        [KEYS.CTRL_LEFT, KEYS.FN_LEFT, KEYS.WIN, KEYS.ALT_LEFT, KEYS.SPACE, KEYS.ALT_RIGHT, KEYS.FN_RIGHT, KEYS.DOC, KEYS.CTRL_RIGHT],
    ]

    var $ = query2selector();
    var templateBoard = document.querySelector("#myBoard").innerHTML;
    var rendererBoard = template2renderer(templateBoard);
    var templateKey = document.querySelector("#myKey").innerHTML;
    var rendererKey = template2renderer(templateKey);

    function updateKeyboard(isUg) {
        var configs = [];
        for (var i = 0; i < keyConfigs.length; i++) {
            configs[i] = []
            for (j = 0; j < keyConfigs[i].length; j++) {
                var item = keyConfigs[i][j]
                var text = isUg && item.ug != undefined ? item.en + " " + item.ug : item.en
                var more = isUg && item.ug_more != undefined ? item.ug_more : item.en_more
                configs[i][j] = {
                    name: item.name,
                    text: text,
                    more: more,
                    size: item.size,
                }
            }
        }
        $("#keyboard").html(rendererBoard(configs));
    }
    updateKeyboard(false);

</script>

</html>